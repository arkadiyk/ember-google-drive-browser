<!DOCTYPE html>
<html>
<head>
  <title>Google Drive Browser</title>
  <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="screen" charset="utf-8">
  <link href="css/app.css" rel="stylesheet" type="text/css" media="screen" charset="utf-8">
  <style type="text/css">
    body {
      padding-top: 60px;
      padding-bottom: 40px;
    }
    .sidebar-nav {
      padding: 9px 0;
    }
  </style>
</head>
<body>

<script type="text/x-handlebars">
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="#">Google Drive Browser</a>
        <p class="navbar-text pull-right">
          Logged in as <a href="#" class="navbar-link">Username</a>
        </p>
        <ul class="nav">
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Source</a></li>
        </ul>
      </div>
    </div>
  </div>
  {{render "login"}}
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span3">
        <div class="well well-small sidebar-nav">

            <div>
                {{#render 'api-state'}}
                {{#if GoogDriveBrw.apiState.activeCalls}}
                <span class="pull-right" style="width: 15px; height: 15px; margin: 5px 15px 0 0; background-image: url(img/api-active.gif); background-repeat: no-repeat;"></span>
                {{/if}}
                {{/render}}
            </div>

            <ul class="nav nav-list">
                {{outlet}}
            </ul>

        </div>
        <!--/.well -->
      </div>
      <!--/span-->
      <div class="span9">
        {{outlet "filesOutlet"}}
      </div>
      <!--/span-->
    </div>
    <!--/row-->
  </div>
  <!--/.fluid-container-->
</script>

<script type="text/x-handlebars" data-template-name="folder">
    {{control 'folder_tree' model}}
</script>

<script type="text/x-handlebars" data-template-name="folder_tree">
    <li>
        <span>
            <i style="cursor:pointer" {{action doFlipExpand model}} {{bindAttr class="isExpanded:icon-folder-open:icon-folder-close"}}></i>
            {{partial 'folder_title'}}
        </span>

        {{#if isExpanded}}
        <ul class="nav nav-list">
            {{#if isLoaded}}
              {{partial 'folder_list'}}
            {{else}}
              {{#if isLoading}}<li style="color:gray; font-size:smaller; margin-left:10px">Loading...</li>{{/if}}
            {{/if}}
        </ul>
        {{/if}}
    </li>
</script>

<script type="text/x-handlebars" data-template-name="_folder_list">
  {{#each child in childFolders}}
      <li>{{control 'folder_tree' child}}</li>
  {{/each}}
</script>

<script type="text/x-handlebars" data-template-name="_folder_title">
  {{#if GoogDriveBrw.viewMode.isList}}
    {{#linkTo 'files.list' model}}{{title}}{{/linkTo}}
  {{else}}
    {{#linkTo 'files.grid' model}}{{title}}{{/linkTo}}
  {{/if}}
</script>

<script type="text/x-handlebars" data-template-name="file_list">
    {{render 'view-mode'}}
    <h3>{{title}}</h3>
    {{#if isLoaded}}
      {{#if GoogDriveBrw.viewMode.isList}}
        {{partial 'list'}}
      {{else}}
        {{partial 'grid'}}
      {{/if}}
    {{else}}
      <span style="margin:15px">loading context..</span>
    {{/if}}
</script>

<script type="text/x-handlebars" data-template-name="_list">
  <table class="table table-striped table-condensed table-hover">
    <tr><th>id</th><th>title</th></tr>
    {{#each file in childFiles}}
      <tr><td>{{file.id}}</td><td>{{file.title}}</td></tr>
    {{/each}}
  </table>
</script>

<script type="text/x-handlebars" data-template-name="_grid">
  <ul class="thumbnails">
    {{#each file in childFiles}}
      <li class="span3">
        <div class="thumbnail">
          <img data-src="holder.js/300x200" alt="">
          <p>{{file.title}}</p>
        </div>
      </li>
    {{/each}}
  </ul>
</script>

<script type="text/x-handlebars" data-template-name="view-mode">
  <div class="pull-right">
    <div class="btn-group">
      {{#linkTo 'files.list' folder classNameBindings=":btn isList:active"}}<i class="icon-list"></i>{{/linkTo}}
      {{#linkTo 'files.grid' folder classNameBindings=":btn isGrid:active"}}<i class="icon-th-large"></i>{{/linkTo}}
    </div>
  </div>
</script>

  <div id="login_dialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="Please login" aria-hidden="true">
    <div class="modal-header">
      <h3>Login</h3>
    </div>
    <div class="modal-body">
      <p>Please Login ...</p>
    </div>
    <div class="modal-footer">
      <button id="login_btn" class="btn btn-primary">Login</button>
    </div>
  </div>


<script charset="utf-8" src="js/lib/jquery-1.9.1.js"></script>

<!-- real thing -->
<script type="text/javascript" src="https://apis.google.com/js/client.js"></script>

<!-- Fake -->
<!-- script src="js/fake_google_drive_api/fixtures.js" type="text/javascript" charset="utf-8"></script -->
<!-- script src="js/fake_google_drive_api/google_fake_api.js" type="text/javascript" charset="utf-8"></script -->

<script type="text/javascript">
  window.ENV = window.ENV || {};
  window.ENV["EXPERIMENTAL_CONTROL_HELPER"] = true;
</script>
<script charset="utf-8" src="js/lib/bootstrap.js" type="text/javascript"></script>
<script charset="utf-8" src="js/lib/handlebars.1.0.0-rc3.js" type="text/javascript"></script>
<script charset="utf-8" src="js/lib/ember-1.0.0-rc.1.js" type="text/javascript"></script>
<script charset="utf-8" src="js/app.js" type="text/javascript"></script>
<script charset="utf-8" src="js/remote_api.js" type="text/javascript"></script>
</body>
</html>
